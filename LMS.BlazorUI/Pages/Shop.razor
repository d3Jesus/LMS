
@page "/shop"

@inject IBookService BookService

<div class="container py-5">
    <div class="row">

        <div class="col-lg-3">
            <CategoriesCardListComponent CategorySelected="DisplayBooksById" />
        </div>

        <div class="col-lg-9">
            <div class="row">
                <div class="col-md-6">
                </div>
                <div class="col-md-6 pb-4">
                    <div class="d-flex">
                        <select class="form-control">
                            <option>Featured</option>
                            <option>A to Z</option>
                            <option>Item</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="row">
                @if (books is not null)
                {
                    foreach (var book in books)
                    {
                        <ItemCardComponent book="book" cssClass="col-md-4" />
                    }
                }
            </div>
            <div div="row">
                <ul class="pagination pagination-lg justify-content-end">
                    <li class="page-item disabled">
                        <a class="page-link active rounded-0 mr-3 shadow-sm border-top-0 border-left-0" href="#" tabindex="-1">1</a>
                    </li>
                    <li class="page-item">
                        <a class="page-link rounded-0 mr-3 shadow-sm border-top-0 border-left-0 text-dark" href="#">2</a>
                    </li>
                    <li class="page-item">
                        <a class="page-link rounded-0 shadow-sm border-top-0 border-left-0 text-dark" href="#">3</a>
                    </li>
                </ul>
            </div>
        </div>

    </div>
</div>



@code {
    private IEnumerable<GetBookViewModel> books;

    protected override async Task OnInitializedAsync()
    {
        books = await BookService.GetAllAsync();
    }

    private async Task DisplayBooksById(int categoryId)
    {
        if (categoryId == 0)
            books = await BookService.GetAllAsync();
        else
            books = await BookService.GetAllByAsync(categoryId);        
    }

}
